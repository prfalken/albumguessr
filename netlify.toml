[build]
  base = "frontend"
  publish = "."
  command = "npm install --no-audit --no-fund && node build-config.js && echo Static site build-ready"

[build.environment]
  NODE_VERSION = "20.17.0"
  # Exclude the generated config (contains search-only key) from secrets scanning
  SECRETS_SCAN_OMIT_PATHS = "config.js"
  # Omit known non-sensitive env keys used in the frontend
  SECRETS_SCAN_OMIT_KEYS = "ALGOLIA_INDEX_NAME,ALGOLIA_APPLICATION_ID,ALGOLIA_SEARCH_API_KEY,EMAILJS_PUBLIC_KEY,EMAILJS_SERVICE_ID,EMAILJS_TEMPLATE_ID"

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

[[extensions]]
package = "."
extension = "netlify-build-extension-neon"

